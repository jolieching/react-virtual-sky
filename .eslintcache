[{"/home/ignacy/react/react-virtual-sky/src/stories/Sky.stories.js":"1","/home/ignacy/react/react-virtual-sky/src/VirtualSky/VirtualSky.js":"2","/home/ignacy/react/react-virtual-sky/src/VirtualSky/projections.js":"3","/home/ignacy/react/react-virtual-sky/src/VirtualSky/info.js":"4","/home/ignacy/react/react-virtual-sky/src/VirtualSky/planets.js":"5","/home/ignacy/react/react-virtual-sky/src/VirtualSky/sunAndMoon.js":"6","/home/ignacy/react/react-virtual-sky/src/VirtualSky/grids.js":"7","/home/ignacy/react/react-virtual-sky/src/VirtualSky/constellationLabels.js":"8","/home/ignacy/react/react-virtual-sky/src/VirtualSky/projectionsConfig.js":"9","/home/ignacy/react/react-virtual-sky/src/VirtualSky/galaxy.js":"10","/home/ignacy/react/react-virtual-sky/src/VirtualSky/constellationLines.js":"11","/home/ignacy/react/react-virtual-sky/src/VirtualSky/constllationBoundaries.js":"12","/home/ignacy/react/react-virtual-sky/src/VirtualSky/stars.js":"13","/home/ignacy/react/react-virtual-sky/src/VirtualSky/i18n.js":"14"},{"size":3801,"mtime":1613413898383,"results":"15","hashOfConfig":"16"},{"size":5529,"mtime":1613413914223,"results":"17","hashOfConfig":"16"},{"size":7822,"mtime":1613180078698,"results":"18","hashOfConfig":"16"},{"size":692,"mtime":1613080422914,"results":"19","hashOfConfig":"16"},{"size":16249,"mtime":1613416074526,"results":"20","hashOfConfig":"16"},{"size":3282,"mtime":1613080422918,"results":"21","hashOfConfig":"16"},{"size":4006,"mtime":1613347152521,"results":"22","hashOfConfig":"16"},{"size":1324,"mtime":1613416016305,"results":"23","hashOfConfig":"16"},{"size":1694,"mtime":1613085599064,"results":"24","hashOfConfig":"16"},{"size":12184,"mtime":1613080422914,"results":"25","hashOfConfig":"16"},{"size":12660,"mtime":1613080422914,"results":"26","hashOfConfig":"16"},{"size":19898,"mtime":1613080422914,"results":"27","hashOfConfig":"16"},{"size":78357,"mtime":1613415982336,"results":"28","hashOfConfig":"16"},{"size":843,"mtime":1613415954000,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"rjzd2w",{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"32"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"32"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/home/ignacy/react/react-virtual-sky/src/stories/Sky.stories.js",[],["61","62"],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/VirtualSky.js",["63"],"import React, {useState, useEffect, useRef, useLayoutEffect} from 'react';\nimport d3 from 'd3'\nimport projectionsConfig from '../VirtualSky/projectionsConfig.js';\nimport {calcConstellationLines, drawConstellationLines} from './constellationLines.js';\nimport {calcConstellationLabels, drawConstellationLabels} from './constellationLabels.js';\nimport {calcBoundaries, drawBoundaries} from './constllationBoundaries.js';\nimport {calcGalaxy, drawGalaxy} from './galaxy.js';\nimport {calcGridAz, calcGridEq, calcGridGal, drawGridAz, drawGridEq, drawGridGal, drawAz} from './grids.js';\nimport {drawStars} from './stars.js';\nimport {drawMoonAndSun} from './sunAndMoon.js';\nimport {calcPlanets, drawPlanets, drawPlanetOrbits, drawPlanetLabels} from './planets.js';\nimport {drawInfo} from './info.js';\nimport {stereo} from './projections.js'\n\nlet  clickAz = null;\nlet stars = [];\nlet planets = [];\nlet svg = null;\nlet azOff = 0;\n\nconst VirtualSky = (props) => {\n  azOff = (props.config.azOff%360)-180;\n\n  const r2d = 180.0/Math.PI;\n  const targetRef = useRef();\n  const time = props.config.time || new Date()\n  const visibility = props.config.visibility;\n  const starMag = visibility.starMag || 2;\n  const config = projectionsConfig(props.config.width, props.config.height, props.config.latitude, props.config.longitude, props.config.language, time)\n  const skyColors = props.config.skyColors || [ 'rgb(0,0,0)' ];\n  const gridAzColor = props.config.gridAzColor;\n  const gridEqColor = props.config.gridEqColor;\n  const gridGalColor = props.config.gridGalColor;\n\n  useLayoutEffect(() => {\n    if (targetRef.current) {\n      config.width = config.width || targetRef.current.offsetWidth;\n      config.height = config.height || targetRef.current.offsetHeight;\n    }\n  }, [config]);\n\n  useEffect(() => {\n    svg = drawCanvas();\n    draw(svg, azOff, stars);\n  });\n\n  const draw = (svg, azOff, stars) =>{\n      const start = new Date().getTime();\n      if(visibility.showGalaxy){\n        calcGalaxy(stereo, azOff, config);\n        drawGalaxy(svg);\n      }\n      if(visibility.showAzGrid){\n        calcGridAz(stereo, azOff, config);\n        drawGridAz(svg, gridAzColor);\n      }\n      if(visibility.showEqGrid){\n        calcGridEq(stereo, azOff, config);\n        drawGridEq(svg, gridEqColor);\n      }\n      if(visibility.showGalGrid){\n        calcGridGal(stereo, azOff, config);\n        drawGridGal(svg, gridGalColor);\n      }\n      if(visibility.showConstellations){\n        calcConstellationLines(stereo, azOff, config);\n        drawConstellationLines(svg, config);\n      }\n      if(visibility.showConstellationBoundaries){\n        calcBoundaries(stereo, azOff, config);\n        drawBoundaries(svg, config);\n      }\n      drawStars(svg, stereo, azOff, config, starMag, visibility.showStarLabels);\n      if(visibility.showPlanets || visibility.showPlanetsLabels || visibility.showPlanetsOrbit){\n        calcPlanets(stereo, azOff, config);\n        if(visibility.showPlanets) drawPlanets(svg);\n        if(visibility.showPlanetsLabels) drawPlanetLabels(svg);\n        if(visibility.showPlanetsOrbit) drawPlanetOrbits(svg);\n      }\n      if(visibility.showSunMoon){\n        drawMoonAndSun(svg, stereo, azOff, config);\n      }\n      if(visibility.showConstellationLabels){\n        calcConstellationLabels(stereo, azOff, config);\n        drawConstellationLabels(svg);\n      }\n      if(visibility.showAzLabels){\n        drawAz(svg, stereo, azOff, config);\n      }\n      const rendTime = new Date().getTime() - start + \"ms\";\n      if(visibility.showInfo){\n        drawInfo(svg, config, rendTime);\n      }\n  }\n\n  const drawCanvas = () =>{\n    d3.select(\"#\" + props.id).select(\"svg\").remove();\n    const svg = d3.select(\"#\" + props.id).append(\"svg\")\n        .attr(\"width\", config.width)\n        .attr(\"height\", config.height)\n        .style(\"background\", \"black\")\n       .on('mousedown', onDown)\n       .on('touchstart', onDown)\n       .on('mousemove', onMove)\n       .on('touchmove', onMove)\n       .on('mouseup', onUp)\n       .on('touchend', onUp)\n\n       makeBackground(svg);\n   return svg;\n  }\n\n  const onDown = (d) =>{\n    const pos = stereo.xy2azel(...d3.mouse(svg.node()), config.width, config.height);\n    clickAz = pos.az;\n  }\n\n  const onMove = (d) =>{\n    if(clickAz){\n      const pos = stereo.xy2azel(...d3.mouse(svg.node()), config.width, config.height);\n      const newAzOff = azOff + (clickAz - pos.az )*r2d;\n      draw(svg, newAzOff, stars, planets)\n    }\n  }\n\n  const onUp = (d) =>{\n    const pos = stereo.xy2azel(...d3.mouse(svg.node()), config.width, config.height);\n    azOff = azOff + (clickAz - pos.az )*r2d;\n    clickAz = null;\n    draw(svg, azOff, stars, planets)\n  }\n\n  const makeBackground = (svg) =>{\n    const grad = svg.append('defs')\n       .append('linearGradient')\n       .attr('id', 'grad')\n       .attr('x1', '0%')\n       .attr('x2', '0%')\n       .attr('y1', '50%')\n       .attr('y2', '100%');\n\n     grad.selectAll('stop')\n       .data(skyColors)\n       .enter()\n       .append('stop')\n       .style('stop-color', function(d){ return d; })\n       .attr('offset', function(d,i){\n         return 100 * (i / (skyColors.length - 1)) + '%';\n       })\n\n     svg.append('rect')\n       .attr('x', 0)\n       .attr('y', 0)\n       .attr('width', config.width)\n       .attr('height', config.height)\n       .style('fill', 'url(#grad)');\n  }\n\n  return (\n    <div ref={targetRef} style={{bottom: \"0px\", top: \"0px\", right: \"0px\", left: \"0px\", position: \"absolute\"}}>\n      <div id={props.id}/>\n    </div>\n  );\n};\n\nexport default VirtualSky;\n","/home/ignacy/react/react-virtual-sky/src/VirtualSky/projections.js",[],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/info.js",[],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/planets.js",["64","65","66"],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/sunAndMoon.js",[],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/grids.js",["67"],"import {azel2xy, ecliptic2xy, radec2xy, gal2xy} from './projections.js';\nimport d3 from 'd3'\n\nconst d2r = Math.PI/180;\nlet gridAz = [];\nlet gridEq = [];\nlet gridGal = [];\n\nexport const calcGridAz = (stereo, azOff, config) =>{\n  gridAz = [];\n  for(let j =-80; j<=80; j+=40){\n    const line = [];\n    for(let i =0; i<=360; i+=10){\n      line.push({ra: i, dec: j, ...azel2xy(i*d2r, j*d2r, stereo, azOff, config)});\n    }\n    gridAz.push(line.filter(l=> !isNaN(l.x) && !isNaN(l.y) ));\n  }\n\n  for(let i =0; i<=360; i+=30){\n    const line = [];\n    for(let j =-85; j<=85; j+=5){\n      line.push({ra: i, dec: j, ...azel2xy(i*d2r, j*d2r, stereo, azOff, config)});\n    }\n    gridAz.push(line.filter(l=> !isNaN(l.x) && !isNaN(l.y) ));\n  }\n}\n\nexport const calcGridEq = (stereo, azOff, config) =>{\n  gridEq = [];\n  for(let j =-80; j<=80; j+=40){\n    const line = [];\n    for(let i =0; i<=360; i+=10){\n      line.push({ra: i, dec: j, ...radec2xy(i*d2r, j*d2r, stereo, azOff, config)});\n    }\n    gridEq.push(line.filter(l=> !isNaN(l.x) && !isNaN(l.y) ));\n  }\n\n  for(let i =0; i<=360; i+=30){\n    const line = [];\n    for(let j =-85; j<=85; j+=5){\n      line.push({ra: i, dec: j, ...radec2xy(i*d2r, j*d2r, stereo, azOff, config)});\n    }\n    gridEq.push(line.filter(l=> !isNaN(l.x) && !isNaN(l.y) ));\n  }\n}\n\nexport const calcGridGal = (stereo, azOff, config) =>{\n  gridGal = [];\n  for(let j =-80; j<=80; j+=40){\n    const line = [];\n    for(let i =0; i<=360; i+=10){\n      line.push({ra: i, dec: j, ...gal2xy(i*d2r, j*d2r, stereo, azOff, config)});\n    }\n    gridGal.push(line.filter(l=> !isNaN(l.x) && !isNaN(l.y) ));\n  }\n\n  for(let i =0; i<=360; i+=30){\n    const line = [];\n    for(let j =-85; j<=85; j+=5){\n      line.push({ra: i, dec: j, ...gal2xy(i*d2r, j*d2r, stereo, azOff, config)});\n    }\n    gridGal.push(line.filter(l=> !isNaN(l.x) && !isNaN(l.y) ));\n  }\n}\n\nexport const drawGridAz = (svg, color) =>{\n    const lines = svg.selectAll('.gridaz');\n    const databoundGridAz = lines.data(gridAz);\n    databoundGridAz.enter().append('path').attr('class','gridaz');;\n    databoundGridAz.exit().remove();\n    databoundGridAz\n        .attr(\"d\", d=>lineFunction(d))\n        .attr(\"stroke\", color)\n        .attr(\"stroke-width\", 1)\n        .attr(\"fill\", \"none\");\n}\n\nexport const drawGridEq = (svg, color) =>{\n    const lines = svg.selectAll('.grideq');\n    const databoundGridEq = lines.data(gridEq);\n    databoundGridEq.enter().append('path').attr('class','grideq');;\n    databoundGridEq.exit().remove();\n    databoundGridEq\n        .attr(\"d\", d=>lineFunction(d))\n        .attr(\"stroke\", color)\n        .attr(\"stroke-width\", 1)\n        .attr(\"fill\", \"none\");\n}\n\nexport const drawGridGal = (svg, color) =>{\n    const lines = svg.selectAll('.gridgal');\n    const databoundGridGal = lines.data(gridGal);\n    databoundGridGal.enter().append('path').attr('class','gridgal');;\n    databoundGridGal.exit().remove();\n    databoundGridGal\n        .attr(\"d\", d=>lineFunction(d))\n        .attr(\"stroke\", color)\n        .attr(\"stroke-width\", 1)\n        .attr(\"fill\", \"none\");\n}\n\nexport const drawAz = (svg, stereo, azOff, config) =>{\n  const az = [\n    {l:\"N\", ...azel2xy(0*d2r, 2*d2r, stereo, azOff, config)},\n    {l:\"E\", ...azel2xy(90*d2r, 2*d2r, stereo, azOff, config)},\n    {l:\"S\", ...azel2xy(180*d2r, 2*d2r, stereo, azOff, config)},\n    {l:\"W\", ...azel2xy(270*d2r, 2*d2r, stereo, azOff, config)}\n  ];\n\n  const labels = svg.selectAll('.azLabels');\n  const databoundLabels = labels.data(az);\n  databoundLabels.enter().append('text').attr('class','azLabels');;\n  databoundLabels.exit().remove();\n  databoundLabels\n    .attr(\"x\", (d) =>{ return d.x; })\n    .attr(\"y\", (d) =>{ return d.y; })\n    .attr(\"dx\", (d) =>{ return 5; })\n    .attr(\"fill\", (d) =>{ return '#888'; })\n    .attr(\"font-size\", \"1em\")\n    .attr(\"font-family\", \"Arial\")\n    .attr(\"font-weight\", \"bold\")\n    .text( (d) =>{ return d.l; });\n}\n\nconst lineFunction = d3.svg.line()\n     .x(d =>{ return d.x; })\n     .y(d =>{ return d.y; })\n     .interpolate(\"linear\");\n","/home/ignacy/react/react-virtual-sky/src/VirtualSky/constellationLabels.js",[],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/projectionsConfig.js",[],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/galaxy.js",[],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/constellationLines.js",[],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/constllationBoundaries.js",[],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/stars.js",[],"/home/ignacy/react/react-virtual-sky/src/VirtualSky/i18n.js",["68","69","70","71","72","73","74","75","76","77","78"],{"ruleId":"79","replacedBy":"80"},{"ruleId":"81","replacedBy":"82"},{"ruleId":"83","severity":1,"message":"84","line":1,"column":16,"nodeType":"85","messageId":"86","endLine":1,"endColumn":24},{"ruleId":"83","severity":1,"message":"87","line":328,"column":6,"nodeType":"85","messageId":"86","endLine":328,"endColumn":13},{"ruleId":"83","severity":1,"message":"88","line":333,"column":2,"nodeType":"85","messageId":"86","endLine":333,"endColumn":7},{"ruleId":"89","severity":1,"message":"90","line":403,"column":7,"nodeType":"85","messageId":"91","endLine":403,"endColumn":10},{"ruleId":"83","severity":1,"message":"92","line":1,"column":18,"nodeType":"85","messageId":"86","endLine":1,"endColumn":29},{"ruleId":"93","severity":1,"message":"94","line":15,"column":29,"nodeType":"95","messageId":"96","endLine":15,"endColumn":35},{"ruleId":"93","severity":1,"message":"94","line":16,"column":29,"nodeType":"95","messageId":"96","endLine":16,"endColumn":35},{"ruleId":"93","severity":1,"message":"94","line":17,"column":29,"nodeType":"95","messageId":"96","endLine":17,"endColumn":35},{"ruleId":"93","severity":1,"message":"94","line":18,"column":29,"nodeType":"95","messageId":"96","endLine":18,"endColumn":35},{"ruleId":"93","severity":1,"message":"94","line":19,"column":29,"nodeType":"95","messageId":"96","endLine":19,"endColumn":35},{"ruleId":"93","severity":1,"message":"94","line":20,"column":29,"nodeType":"95","messageId":"96","endLine":20,"endColumn":35},{"ruleId":"93","severity":1,"message":"94","line":21,"column":29,"nodeType":"95","messageId":"96","endLine":21,"endColumn":35},{"ruleId":"93","severity":1,"message":"94","line":22,"column":29,"nodeType":"95","messageId":"96","endLine":22,"endColumn":35},{"ruleId":"93","severity":1,"message":"94","line":23,"column":29,"nodeType":"95","messageId":"96","endLine":23,"endColumn":35},{"ruleId":"93","severity":1,"message":"94","line":24,"column":29,"nodeType":"95","messageId":"96","endLine":24,"endColumn":35},{"ruleId":"93","severity":1,"message":"94","line":25,"column":29,"nodeType":"95","messageId":"96","endLine":25,"endColumn":35},"no-native-reassign",["97"],"no-negated-in-lhs",["98"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'angdiam' is assigned a value but never used.","'phase' is assigned a value but never used.","no-redeclare","'eps' is already defined.","redeclared","'ecliptic2xy' is defined but never used.","no-unreachable","Unreachable code.","BreakStatement","unreachableCode","no-global-assign","no-unsafe-negation"]